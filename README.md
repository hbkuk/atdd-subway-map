# 지하철 노선도 미션
[ATDD 강의](https://edu.nextstep.camp/c/R89PYi5H) 실습을 위한 지하철 노선도 애플리케이션

## 1주차 미션
- Review 정리
  - 가변인자를 받는 `containsAnyOf` 메서드 활용
  - 매직넘버를 사용하는 것을 지양할 것
  - 메서드명에 `And`와 같이 2가지 이상의 일을 하고 있음을 표현하는 것을 지양할 것

## 2주차 미션
### 진행 순서
  1. 인수 테스트 작성
  2. 작성한 테스트가 `Pass` 되도록 기능 구현

### 인수 테스트 작성
  - [X] 지하철 노선 생성
  - [X] 지하철 노선 목록 조회
  - [X] 지하철 노선 조회
  - [X] 지하철 노선 수정
  - [X] 지하철 노선 삭제

### 인수 테스트 성공
  - [X] 지하철 노선 생성
  - [X] 지하철 노선 목록 조회
  - [X] 지하철 노선 조회
  - [X] 지하철 노선 수정
  - [X] 지하철 노선 삭제

### 고민
  - 테스트 검증 범위
     - 일부, 중요하다고 생각하는 필드만? 
        - 예) 지하철 노선명 + 색상 정도?
     - 모든 필드?
       - JsonPath를 반환받아서 `get` 혹은 `getList` 메서드를 통해 검증?
  - 진행 순서
     1. 모든 인수 테스트 작성(리팩토링 X)
        - 요청: 로그를 통해 request method, URI, body 정도?
        - 응답: 로그를 통해 실패하는? 응답 상태코드 정도?
     2. 기능 구현
        - Repository -> Service -> Controller
     3. 기능 리팩토링
     4. 인수 테스트 리팩토링 
     5. 인수 테스트 최종 검토
  - throw Exception
    - id에 해당하는 지하철 노선이 없을 경우, 예외를 Throw하는 위치
      - 요청이 제대로 오는지 확인, 응답을 제대로 전달하는 것에만 집중하는 Controller에서 하는 것이 아닌 서비스에 역할일까?
  - `updateStationLine` 메서드는 @Transaction 어노테이션이 없다면, 조회 시 수정 전 데이터가 조회된다.(`deleteStationLine` 동일)
    - 테스트 메서드에서는 EntityManager가 하나만 사용되는 것인가?
      - 아님. entity.clear 혹은 entity.flush를 호출해도 실패
  - 테스트 케이스의 수행 결과를 판별하는 메서드도 리팩토링하는 것이 좋을까?
    - 어떻게 분리하는 것이 좋을지
      - 분리한다면, 오히려 가독성이 떨어지는 것이 아닌지?